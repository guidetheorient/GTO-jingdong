webpackJsonp([1],{52:function(e,t,i){e.exports=i(53)},53:function(e,t,i){"use strict";(function(e){i(4),i(6),i(2),i(54);var t=i(0),s=i(55),a=i(9),r=i(56),o=i(57),n=i(58),d={data:{shippingId:""},init:function(){this.load(),this.bind()},load:function(){this.loadAddressList(),this.loadProductList()},bind:function(){var i=this;e(document).on("click",".add-address",function(e){e.preventDefault(),n.init({type:"add",success:i.loadAddressList})}),e(document).on("click",".edit",function(t){var s=e(this);t.preventDefault(),n.init({type:"edit",$ele:s.parents("li"),success:i.loadAddressList})}),e(document).on("click",".del",function(){var s=e(this).parents("li"),r=s.data("id");a.deleteAddress({shippingId:r},function(e){t.successTips("地址删除成功"),i.loadAddressList()},function(e){t.errorTips(e),console.log(e)})}),e(document).on("click",".submit-order",function(){i.data.shippingId?s.createOrder({shippingId:i.data.shippingId},function(e){console.log(e),location.href="./pay.html?orderNo="+e.data.orderNo},function(e){t.errorTips("提交订单失败")}):t.errorTips("还没有选择收货地址")}),e(document).on("click",".address-name",function(){var t=e(this).parents("li");i.data.shippingId=t.data("id"),t.addClass("active").siblings().removeClass("active")})},loadAddressList:function(){a.getAddressList(function(i){console.log(i),e(".address-list").html(t.renderHtml(r,i.data))},function(e){t.errorTips(e)})},loadProductList:function(){s.getProductList(function(i){e(".tpl-wrapper").html(t.renderHtml(o,i.data))},function(e){t.errorTips(e)})}};e(function(){d.init()})}).call(t,i(1))},54:function(e,t){},55:function(e,t,i){"use strict";var s=i(0),a=(i(3),{getProductList:function(e,t){s.request({url:s.getUrl("/order/get_order_cart_product.do"),success:e,error:t})},createOrder:function(e,t,i){s.request({url:s.getUrl("/order/create.do"),data:e,success:t,error:i})},getOrderList:function(e,t,i){s.request({url:s.getUrl("/order/list.do"),data:e,success:t,error:i})}});e.exports=a},56:function(e,t){e.exports='<%if(data.list && data.list.length){%> <%data.list.forEach(value => {%> <li data-id="<%=value.id%>"> <span class=address-name><%=value.receiverName%></span> <span class=name><%=value.receiverName%></span> <span class=province><%=value.receiverProvince%></span> <span class=city><%=value.receiverCity%></span> <span class=address-detail><%=value.receiverAddress%></span> <span class=tel><%=value.receiverPhone%></span> <div class=operation-wrapper> <span class=edit>编辑</span> <span class=del>删除</span> </div> </li> <%})%> <%}%> '},57:function(e,t){e.exports=' <div class="sec sec2"> <h4 class=title>送货清单</h4> <table class=table> <tr class=header> <td class="">商品描述</td> <td class="">价格</td> <td class="">数量</td> <td class="">小计</td> </tr> <%data.orderItemVoList.forEach(value => {%> <tr class=product-item> <td> <img src="<%=data.imageHost + value.productImage%>" alt=""> <span class=name><%=value.productName%></span> </td> <td class=cell>$ <%=value.currentUnitPrice%></td> <td class=cell><%=value.quantity%></td> <td class=cell>$ <%=value.totalPrice%></td> </tr> <%})%> </table> </div> <div class="footer sec3"> <span class=total-price-wrapper> 订单总价： <span class=total-price>$ <%=data.productTotalPrice%></span> </span> <span class=submit-order>提交订单</span> </div> '},58:function(e,t,i){"use strict";(function(t){var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=i(59),r=i(0),o=i(9),n=i(60),d=(i(61),i(62)),l={init:function(e){this.para=e,this.$modal=t(".add-address-modal"),this.$modalCon=this.$modal.find(".modal"),this.$infoList=this.$modal.find(".info-list"),"edit"===e.type&&(this.para.id=e.$ele.data("id")),this.load(),this.$modal.show()},load:function(){var e=this,i={provinces:a.getProvinces()};"add"===this.para.type?(this.$infoList.html(r.renderHtml(n,i)),this.getEle(),this.bind()):"edit"===this.para.type&&o.getAddressList(function(s){if(s.data.list&&s.data.list.length){var a=s.data.list.filter(function(t){return t.id===e.para.id})[0];e.$infoList.html(r.renderHtml(n,t.extend(a,i))),e.loadCities(a.receiverProvince,a.receiverCity),e.getEle(),e.bind()}})},loadCities:function(e,i){var s=a.getCities(e);t(".modal .city").html(r.renderHtml(d,{cities:s,selectedCity:i}))},bind:function(){var e=this;this.$provinceSelect.on("change",function(){var i=t(this).val();e.loadCities(i)});var i=!1;this.$submitBtn.on("click",function(t){t.preventDefault();var a=e.getSubmitPara();"add"===e.para.type&&a.status&&!i?(i=!0,o.createAddress(a.para,function(t){r.successTips("地址添加成功"),e.$modal.hide(),s(e.para.success)&&e.para.success(),e.$modal.hide(),i=!1,console.log(t)},function(e){console.log(e),r.errorTips(e)})):"edit"===e.para.type&&a.status&&o.updateAddress(a.para,function(t){r.successTips("地址修改成功"),e.$modal.hide(),s(e.para.success)&&e.para.success(),e.$modal.hide(),console.log(t)},function(e){console.log(e),r.errorTips(e)})}),this.$modalCon.on("click",function(e){e.stopPropagation()}),this.$closeBtn.on("click",function(t){t.stopPropagation(),e.$modal.hide()}),this.$modal.on("click",function(){e.$modal.hide()})},getSubmitPara:function(){var e={status:!1,msg:"",para:null},t={receiverName:this.$personNameIpt.val().trim(),receiverPhone:this.$telIpt.val().trim(),receiverProvince:this.$provinceSelect.val(),receiverCity:this.$citySelect.val(),receiverAddress:this.$addressDetailIpt.val().trim(),receiverZip:this.$postCodeIpt.val().trim()};return"add"!==this.para.type&&(t.id=this.para.id),t.receiverName?t.receiverProvince?t.receiverCity?t.receiverAddress?r.isPhoneNumber(t.receiverPhone)?(e.status=!0,e.para=t):e.msg="请输入正确的手机号":e.msg="请输入详细地址":e.msg="请选择城市":e.msg="请选择省份":e.msg="请输入收件人姓名",e},getEle:function(){this.$provinceSelect=this.$modal.find(".province"),this.$citySelect=this.$modal.find(".city"),this.$personNameIpt=this.$modal.find("#person-name"),this.$addressDetailIpt=this.$modal.find("#address-detail"),this.$telIpt=this.$modal.find("#tel"),this.$postCodeIpt=this.$modal.find("#post-code"),this.$submitBtn=this.$modal.find(".submit-btn"),this.$closeBtn=this.$modal.find(".fa-times")}};e.exports=l}).call(t,i(1))},59:function(e,t,i){"use strict";var s={cityInfo:{"北京":["北京"],"上海":["上海"],"天津":["天津"],"重庆":["重庆"],"河北省":["石家庄","张家口","承德","秦皇岛","唐山","廊坊","保定","沧州","衡水","邢台","邯郸"],"山西省":["太原","大同","朔州","阳泉","长治","晋城","忻州","吕梁","晋中","临汾","运城"],"辽宁省":["沈阳","朝阳","阜新","铁岭","抚顺","本溪","辽阳","鞍山","丹东","大连","营口","盘锦","锦州","葫芦岛"],"吉林省":["长春","白城","松原","吉林","四平","辽源","通化","白山","延边"],"黑龙江省":["哈尔滨","齐齐哈尔","黑河","大庆","伊春","鹤岗","佳木斯","双鸭山","七台河","鸡西","牡丹江","绥化","大兴安"],"江苏省":["南京","徐州","连云港","宿迁","淮阴","盐城","扬州","泰州","南通","镇江","常州","无锡","苏州"],"浙江省":["杭州","湖州","嘉兴","舟山","宁波","绍兴","金华","台州","温州","丽水"],"安徽省":["合肥","宿州","淮北","阜阳","蚌埠","淮南","滁州","马鞍山","芜湖","铜陵","安庆","黄山","六安","巢湖","池州","宣城"],"福建省":["福州","南平","三明","莆田","泉州","厦门","漳州","龙岩","宁德"],"江西省":["南昌","九江","景德镇","鹰潭","新余","萍乡","赣州","上饶","抚州","宜春","吉安"],"山东省":["济南","聊城","德州","东营","淄博","潍坊","烟台","威海","青岛","日照","临沂","枣庄","济宁","泰安","莱芜","滨州","菏泽"],"河南省":["郑州","三门峡","洛阳","焦作","新乡","鹤壁","安阳","濮阳","开封","商丘","许昌","漯河","平顶山","南阳","信阳","周口","驻马店"],"湖北省":["武汉","十堰","襄攀","荆门","孝感","黄冈","鄂州","黄石","咸宁","荆州","宜昌","恩施","襄樊"],"湖南省":["长沙","张家界","常德","益阳","岳阳","株洲","湘潭","衡阳","郴州","永州","邵阳","怀化","娄底","湘西"],"广东省":["广州","清远","韶关","河源","梅州","潮州","汕头","揭阳","汕尾","惠州","东莞","深圳","珠海","江门","佛山","肇庆","云浮","阳江","茂名","湛江"],"海南省":["海口","三亚"],"四川省":["成都","广元","绵阳","德阳","南充","广安","遂宁","内江","乐山","自贡","泸州","宜宾","攀枝花","巴中","达川","资阳","眉山","雅安","阿坝","甘孜","凉山"],"贵州省":["贵阳","六盘水","遵义","毕节","铜仁","安顺","黔东南","黔南","黔西南"],"云南省":["昆明","曲靖","玉溪","丽江","昭通","思茅","临沧","保山","德宏","怒江","迪庆","大理","楚雄","红河","文山","西双版纳"],"陕西省":["西安","延安","铜川","渭南","咸阳","宝鸡","汉中","榆林","商洛","安康"],"甘肃省":["兰州","嘉峪关","金昌","白银","天水","酒泉","张掖","武威","庆阳","平凉","定西","陇南","临夏","甘南"],"青海省":["西宁","海东","西宁","海北","海南","黄南","果洛","玉树","海西"],"内蒙古":["呼和浩特","包头","乌海","赤峰","呼伦贝尔盟","兴安盟","哲里木盟","锡林郭勒盟","乌兰察布盟","鄂尔多斯","巴彦淖尔盟","阿拉善盟"],"广西":["南宁","桂林","柳州","梧州","贵港","玉林","钦州","北海","防城港","南宁","百色","河池","柳州","贺州"],"西藏":["拉萨","那曲","昌都","林芝","山南","日喀则","阿里"],"宁夏":["银川","石嘴山","吴忠","固原"],"新疆":["乌鲁木齐","克拉玛依","喀什","阿克苏","和田","吐鲁番","哈密","博尔塔拉","昌吉","巴音郭楞","伊犁","塔城","阿勒泰"],"香港":["香港"],"澳门":["澳门"],"台湾":["台北","台南","其他"]},getProvinces:function(){return Object.keys(this.cityInfo)},getCities:function(e){return this.cityInfo[e]}};e.exports=s},60:function(e,t){e.exports='<li> <span><i class=required>*</i>所在地区</span> <select name="" id="" class=province value="<%=data.receiverProvince || \'\'%>"> <%if(data.receiverProvince){%> <option disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <%if(value === data.receiverProvince){%> <option selected=selected value="<%=value%>"><%=value%></option> <%} else {%> <option value="<%=value%>"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <option value="<%=value%>"><%=value%></option> <%})%> <%}%> </select> <select name="" id="" class=city value="<%=data.receiverCity || \'\'%>"> <option selected=selected disabled=disabled>--请选择城市--</option> </select> </li> <li> <span><i class=required>*</i>收货人</span> <input type=text name="" id=person-name value="<%=data.receiverName || \'\'%>"> </li> <li> <span><i class=required>*</i>详细地址</span> <input type=text name="" id=address-detail value="<%=data.receiverAddress || \'\'%>"> </li> <li> <span><i class=required>*</i>手机号码</span> <input type=text name="" id=tel value="<%=data.receiverPhone || \'\'%>"> </li> <li> <span><i class=""></i>邮编</span> <input type=text name="" id=post-code value="<%=data.receiverZip || \'\'%>"> </li> <li><a href=# class=submit-btn>保存收货人信息</a></li>'},61:function(e,t){e.exports='<option selected=selected disabled=disabled>--请选择省份--</option> <%data.forEach(value =>{%> <option value="<%=value%>"><%=value%></option> <%})%>'},62:function(e,t){e.exports='<%if(data.selectedCity){%> <option disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <%if(value === data.selectedCity) {%> <option selected=selected value="<%=value%>"><%=value%></option> <%} else {%> <option value="<%=value%>"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <option value="<%=value%>"><%=value%></option> <%})%> <%}%>'},9:function(e,t,i){"use strict";var s=i(0),a=(i(3),{getAddressList:function(e,t){s.request({url:s.getUrl("/shipping/list.do"),data:{pageSize:10},success:e,error:t})},createAddress:function(e,t,i){s.request({url:s.getUrl("/shipping/add.do"),data:e,success:t,error:i})},updateAddress:function(e,t,i){console.log(e),s.request({url:s.getUrl("/shipping/update.do"),data:e,success:t,error:i})},deleteAddress:function(e,t,i){s.request({url:s.getUrl("/shipping/del.do"),data:e,success:t,error:i})},getSelectedAddress:function(e,t,i){console.log(e),s.request({url:s.getUrl("/shipping/select.do"),para:e,success:t,error:i})}});e.exports=a}},[52]);
//# sourceMappingURL=order-confirm.js.map