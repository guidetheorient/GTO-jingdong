{"version":3,"sources":["webpack:///js/order-confirm.js","webpack:///./src/pages/order-confirm/index.js","webpack:///./src/tool/service/order.js","webpack:///./src/pages/order-confirm/address-list.ejs","webpack:///./src/pages/order-confirm/product-list.ejs","webpack:///./src/pages/order-confirm/modal.js","webpack:///./src/tool/util/city-select.js","webpack:///./src/pages/order-confirm/modal.ejs","webpack:///./src/pages/order-confirm/provinces.ejs","webpack:///./src/pages/order-confirm/cities.ejs","webpack:///./src/tool/service/address.js"],"names":["webpackJsonp","52","module","exports","__webpack_require__","53","$","_util","_order","_address","addressTpl","productTpl","modal","orderConfirm","data","shippingId","init","this","load","bind","loadAddressList","loadProductList","_this","document","on","e","preventDefault","type","success","$this","$ele","parents","id","deleteAddress","res","successTips","errMsg","errorTips","console","log","createOrder","location","href","orderNo","addClass","siblings","removeClass","getAddressList","html","renderHtml","getProductList","call","54","55","resolve","reject","request","url","getUrl","error","para","getOrderList","56","57","58","_typeof","Symbol","iterator","obj","constructor","prototype","_citySelect","modalTpl","citiesTpl","$modal","$modalCon","find","$infoList","show","provinces","getProvinces","getEle","list","length","address","filter","value","extend","loadCities","receiverProvince","receiverCity","province","selectedCity","cities","getCities","$provinceSelect","val","isAdding","$submitBtn","result","getSubmitPara","status","createAddress","hide","updateAddress","stopPropagation","$closeBtn","msg","receiverName","$personNameIpt","trim","receiverPhone","$telIpt","$citySelect","receiverAddress","$addressDetailIpt","receiverZip","$postCodeIpt","isPhoneNumber","59","cityInfo","北京","上海","天津","重庆","河北省","山西省","辽宁省","吉林省","黑龙江省","江苏省","浙江省","安徽省","福建省","江西省","山东省","河南省","湖北省","湖南省","广东省","海南省","四川省","贵州省","云南省","陕西省","甘肃省","青海省","内蒙古","广西","西藏","宁夏","新疆","香港","澳门","台湾","Object","keys","60","61","62","9","pageSize","getSelectedAddress"],"mappings":"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","file":"js/order-confirm.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ 52:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(53);\n\n\n/***/ }),\n\n/***/ 53:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-03-31 22:00:47 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-10 12:55:18\r\n */\n\n// header js&css\n__webpack_require__(4);\n\n// header-search js&css\n__webpack_require__(6);\n\n// simple-footer js&css\n__webpack_require__(2);\n\n// css\n__webpack_require__(54);\n\n// util工具类\nvar _util = __webpack_require__(0);\nvar _order = __webpack_require__(55);\nvar _address = __webpack_require__(9);\n\nvar addressTpl = __webpack_require__(56);\nvar productTpl = __webpack_require__(57);\n\n// 1.新增地址 2.修改地址 modal\nvar modal = __webpack_require__(58);\n\nvar orderConfirm = {\n  data: {\n    shippingId: ''\n  },\n  init: function init() {\n    this.load();\n    this.bind();\n  },\n  load: function load() {\n    this.loadAddressList();\n    this.loadProductList();\n  },\n  bind: function bind() {\n    var _this = this;\n\n    // 新增收货地址\n    $(document).on('click', '.add-address', function (e) {\n      e.preventDefault();\n      modal.init({\n        type: 'add',\n        success: _this.loadAddressList\n      });\n    });\n    // 修改地址\n    $(document).on('click', '.edit', function (e) {\n      var $this = $(this);\n\n      e.preventDefault();\n      modal.init({\n        type: 'edit',\n        $ele: $this.parents('li'),\n        success: _this.loadAddressList\n      });\n    });\n\n    //删除\n    $(document).on('click', '.del', function () {\n      var $ele = $(this).parents('li');\n      var id = $ele.data('id');\n      _address.deleteAddress({\n        shippingId: id\n      }, function (res) {\n        _util.successTips('地址删除成功');\n        _this.loadAddressList();\n      }, function (errMsg) {\n        _util.errorTips(errMsg);\n        console.log(errMsg);\n      });\n    });\n\n    // 提交订单\n    $(document).on('click', '.submit-order', function () {\n      if (_this.data.shippingId) {\n        _order.createOrder({\n          shippingId: _this.data.shippingId\n        }, function (res) {\n          console.log(res);\n          location.href = './pay.html?orderNo=' + res.data.orderNo;\n        }, function (errMsg) {\n          _util.errorTips('提交订单失败');\n        });\n      } else {\n        _util.errorTips('还没有选择收货地址');\n      }\n    });\n\n    // 选中特定收件人\n    $(document).on('click', '.address-name', function () {\n      var $ele = $(this).parents('li');\n      _this.data.shippingId = $ele.data('id');\n\n      $ele.addClass('active').siblings().removeClass('active');\n    });\n  },\n\n\n  // 加载地址列表\n  loadAddressList: function loadAddressList() {\n    _address.getAddressList(function (res) {\n      console.log(res);\n      $('.address-list').html(_util.renderHtml(addressTpl, res.data));\n    }, function (errMsg) {\n      _util.errorTips(errMsg);\n    });\n  },\n\n  // 加载订单商品列表\n  loadProductList: function loadProductList() {\n    _order.getProductList(function (res) {\n      // console.log(res)\n      $('.tpl-wrapper').html(_util.renderHtml(productTpl, res.data));\n    }, function (errMsg) {\n      _util.errorTips(errMsg);\n    });\n  }\n};\n\n$(function () {\n  orderConfirm.init();\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n\n/***/ 54:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ }),\n\n/***/ 55:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-07 16:59:13 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 17:29:32\r\n */\n\nvar _util = __webpack_require__(0);\nvar _user = __webpack_require__(3);\n\nvar _order = {\n  // 获取提交的订单商品\n  getProductList: function getProductList(resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/order/get_order_cart_product.do'),\n      success: resolve,\n      error: reject\n    });\n  },\n\n  // 提交订单\n  createOrder: function createOrder(para, resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/order/create.do'),\n      data: para,\n      success: resolve,\n      error: reject\n    });\n  },\n  // 获取订单列表\n  getOrderList: function getOrderList(para, resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/order/list.do'),\n      data: para,\n      success: resolve,\n      error: reject\n    });\n  }\n};\n\nmodule.exports = _order;\n\n/***/ }),\n\n/***/ 56:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<%if(data.list && data.list.length){%> <%data.list.forEach(value => {%> <li data-id=\\\"<%=value.id%>\\\"> <span class=address-name><%=value.receiverName%></span> <span class=name><%=value.receiverName%></span> <span class=province><%=value.receiverProvince%></span> <span class=city><%=value.receiverCity%></span> <span class=address-detail><%=value.receiverAddress%></span> <span class=tel><%=value.receiverPhone%></span> <div class=operation-wrapper> <span class=edit>编辑</span> <span class=del>删除</span> </div> </li> <%})%> <%}%> \";\n\n/***/ }),\n\n/***/ 57:\n/***/ (function(module, exports) {\n\nmodule.exports = \" <div class=\\\"sec sec2\\\"> <h4 class=title>送货清单</h4> <table class=table> <tr class=header> <td class=\\\"\\\">商品描述</td> <td class=\\\"\\\">价格</td> <td class=\\\"\\\">数量</td> <td class=\\\"\\\">小计</td> </tr> <%data.orderItemVoList.forEach(value => {%> <tr class=product-item> <td> <img src=\\\"<%=data.imageHost + value.productImage%>\\\" alt=\\\"\\\"> <span class=name><%=value.productName%></span> </td> <td class=cell>$ <%=value.currentUnitPrice%></td> <td class=cell><%=value.quantity%></td> <td class=cell>$ <%=value.totalPrice%></td> </tr> <%})%> </table> </div> <div class=\\\"footer sec3\\\"> <span class=total-price-wrapper> 订单总价： <span class=total-price>$ <%=data.productTotalPrice%></span> </span> <span class=submit-order>提交订单</span> </div> \";\n\n/***/ }),\n\n/***/ 58:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-09 10:40:20 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 17:14:37\r\n */\n\n// 省市联动\nvar _citySelect = __webpack_require__(59);\n\nvar _util = __webpack_require__(0);\n\n// 地址接口\nvar _address = __webpack_require__(9);\n\n// 除省份城市之外的tpl\nvar modalTpl = __webpack_require__(60);\n// 省份城市tpl\nvar provincesTpl = __webpack_require__(61);\nvar citiesTpl = __webpack_require__(62);\n\nvar modal = {\n  init: function init(para) {\n    /**\r\n     * para {\r\n     *  type: 'edit' or 'add',\r\n     *  $ele:  (edit存在的情况下) \r\n     * } \r\n     */\n    this.para = para;\n\n    // modal\n    this.$modal = $('.add-address-modal');\n    this.$modalCon = this.$modal.find('.modal');\n    this.$infoList = this.$modal.find('.info-list');\n\n    // shippingId (type=== ‘edit’)\n    para.type === 'edit' ? this.para.id = para.$ele.data('id') : '';\n\n    // 加载原始数据\n    this.load();\n\n    // 显示\n    this.$modal.show();\n  },\n  load: function load() {\n    var _this = this;\n\n    var data = {\n      provinces: _citySelect.getProvinces()\n\n      // 添加地址\n    };if (this.para.type === 'add') {\n      this.$infoList.html(_util.renderHtml(modalTpl, data));\n      this.getEle();\n      this.bind();\n    }\n    // 编辑地址\n    else if (this.para.type === 'edit') {\n        _address.getAddressList(function (res) {\n          if (res.data.list && res.data.list.length) {\n            // 获取shippingId对应的地址\n            var address = res.data.list.filter(function (value) {\n              return value.id === _this.para.id;\n            })[0];\n\n            // render信息\n            _this.$infoList.html(_util.renderHtml(modalTpl, $.extend(address, data)));\n            // render城市\n            _this.loadCities(address.receiverProvince, address.receiverCity);\n            _this.getEle();\n            _this.bind();\n          }\n        });\n        // 这个接口好像挂了\n        // _address.getSelectedAddress({\n        //   shippingId: this.para.id\n        // },function (res) {\n        //   console.log(res)\n        //   this.$infoList.html(_util.renderHtml(modalTpl, res.data));\n        // },function (errMsg) {\n        //   console.log(errMsg)\n        // })\n      }\n  },\n  loadCities: function loadCities(province, selectedCity) {\n    var cities = _citySelect.getCities(province);\n    $('.modal .city').html(_util.renderHtml(citiesTpl, {\n      cities: cities,\n      selectedCity: selectedCity\n    }));\n  },\n  bind: function bind() {\n    var _this = this;\n\n    // 省市联动\n    this.$provinceSelect.on('change', function () {\n      var province = $(this).val();\n      _this.loadCities(province);\n    });\n\n    var isAdding = false;\n    this.$submitBtn.on('click', function (e) {\n      e.preventDefault();\n      var result = _this.getSubmitPara();\n      // 新增地址\n      if (_this.para.type === 'add' && result.status && !isAdding) {\n        isAdding = true;\n        _address.createAddress(result.para, function (res) {\n          _util.successTips('地址添加成功');\n          _this.$modal.hide();\n          _typeof(_this.para.success) && _this.para.success();\n          _this.$modal.hide();\n          isAdding = false;\n          console.log(res);\n        }, function (errMsg) {\n          console.log(errMsg);\n          _util.errorTips(errMsg);\n        });\n      }\n      // 编辑地址\n      else if (_this.para.type === 'edit' && result.status) {\n          _address.updateAddress(result.para, function (res) {\n            _util.successTips('地址修改成功');\n            _this.$modal.hide();\n            _typeof(_this.para.success) && _this.para.success();\n            _this.$modal.hide();\n            console.log(res);\n          }, function (errMsg) {\n            console.log(errMsg);\n            _util.errorTips(errMsg);\n          });\n        }\n    });\n\n    // 关闭modal\n    this.$modalCon.on('click', function (e) {\n      e.stopPropagation();\n    });\n    this.$closeBtn.on('click', function (e) {\n      e.stopPropagation();\n      _this.$modal.hide();\n    });\n    this.$modal.on('click', function () {\n      _this.$modal.hide();\n    });\n  },\n  getSubmitPara: function getSubmitPara() {\n    var result = {\n      status: false,\n      msg: '',\n      para: null\n    };\n    var para = {\n      receiverName: this.$personNameIpt.val().trim(),\n      receiverPhone: this.$telIpt.val().trim(),\n      receiverProvince: this.$provinceSelect.val(),\n      receiverCity: this.$citySelect.val(),\n      receiverAddress: this.$addressDetailIpt.val().trim(),\n      receiverZip: this.$postCodeIpt.val().trim()\n    };\n\n    if (this.para.type !== 'add') {\n      para.id = this.para.id;\n    }\n\n    if (!para.receiverName) {\n      result.msg = '请输入收件人姓名';\n    } else if (!para.receiverProvince) {\n      result.msg = '请选择省份';\n    } else if (!para.receiverCity) {\n      result.msg = '请选择城市';\n    } else if (!para.receiverAddress) {\n      result.msg = '请输入详细地址';\n    } else if (!_util.isPhoneNumber(para.receiverPhone)) {\n      result.msg = '请输入正确的手机号';\n    } else {\n      result.status = true;\n      result.para = para;\n    }\n    return result;\n  },\n  getEle: function getEle() {\n    this.$provinceSelect = this.$modal.find('.province');\n    this.$citySelect = this.$modal.find('.city');\n    this.$personNameIpt = this.$modal.find('#person-name');\n    this.$addressDetailIpt = this.$modal.find('#address-detail');\n    this.$telIpt = this.$modal.find('#tel');\n    this.$postCodeIpt = this.$modal.find('#post-code');\n\n    this.$submitBtn = this.$modal.find('.submit-btn');\n    this.$closeBtn = this.$modal.find('.fa-times');\n  }\n};\n\nmodule.exports = modal;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n\n/***/ 59:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-09 11:00:59 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 12:09:22\r\n */\n\nvar _citySelect = {\n  cityInfo: {\n    '北京': ['北京'],\n    '上海': ['上海'],\n    '天津': ['天津'],\n    '重庆': ['重庆'],\n    '河北省': ['石家庄', '张家口', '承德', '秦皇岛', '唐山', '廊坊', '保定', '沧州', '衡水', '邢台', '邯郸'],\n    '山西省': ['太原', '大同', '朔州', '阳泉', '长治', '晋城', '忻州', '吕梁', '晋中', '临汾', '运城'],\n    '辽宁省': ['沈阳', '朝阳', '阜新', '铁岭', '抚顺', '本溪', '辽阳', '鞍山', '丹东', '大连', '营口', '盘锦', '锦州', '葫芦岛'],\n    '吉林省': ['长春', '白城', '松原', '吉林', '四平', '辽源', '通化', '白山', '延边'],\n    '黑龙江省': ['哈尔滨', '齐齐哈尔', '黑河', '大庆', '伊春', '鹤岗', '佳木斯', '双鸭山', '七台河', '鸡西', '牡丹江', '绥化', '大兴安'],\n    '江苏省': ['南京', '徐州', '连云港', '宿迁', '淮阴', '盐城', '扬州', '泰州', '南通', '镇江', '常州', '无锡', '苏州'],\n    '浙江省': ['杭州', '湖州', '嘉兴', '舟山', '宁波', '绍兴', '金华', '台州', '温州', '丽水'],\n    '安徽省': ['合肥', '宿州', '淮北', '阜阳', '蚌埠', '淮南', '滁州', '马鞍山', '芜湖', '铜陵', '安庆', '黄山', '六安', '巢湖', '池州', '宣城'],\n    '福建省': ['福州', '南平', '三明', '莆田', '泉州', '厦门', '漳州', '龙岩', '宁德'],\n    '江西省': ['南昌', '九江', '景德镇', '鹰潭', '新余', '萍乡', '赣州', '上饶', '抚州', '宜春', '吉安'],\n    '山东省': ['济南', '聊城', '德州', '东营', '淄博', '潍坊', '烟台', '威海', '青岛', '日照', '临沂', '枣庄', '济宁', '泰安', '莱芜', '滨州', '菏泽'],\n    '河南省': ['郑州', '三门峡', '洛阳', '焦作', '新乡', '鹤壁', '安阳', '濮阳', '开封', '商丘', '许昌', '漯河', '平顶山', '南阳', '信阳', '周口', '驻马店'],\n    '湖北省': ['武汉', '十堰', '襄攀', '荆门', '孝感', '黄冈', '鄂州', '黄石', '咸宁', '荆州', '宜昌', '恩施', '襄樊'],\n    '湖南省': ['长沙', '张家界', '常德', '益阳', '岳阳', '株洲', '湘潭', '衡阳', '郴州', '永州', '邵阳', '怀化', '娄底', '湘西'],\n    '广东省': ['广州', '清远', '韶关', '河源', '梅州', '潮州', '汕头', '揭阳', '汕尾', '惠州', '东莞', '深圳', '珠海', '江门', '佛山', '肇庆', '云浮', '阳江', '茂名', '湛江'],\n    '海南省': ['海口', '三亚'],\n    '四川省': ['成都', '广元', '绵阳', '德阳', '南充', '广安', '遂宁', '内江', '乐山', '自贡', '泸州', '宜宾', '攀枝花', '巴中', '达川', '资阳', '眉山', '雅安', '阿坝', '甘孜', '凉山'],\n    '贵州省': ['贵阳', '六盘水', '遵义', '毕节', '铜仁', '安顺', '黔东南', '黔南', '黔西南'],\n    '云南省': ['昆明', '曲靖', '玉溪', '丽江', '昭通', '思茅', '临沧', '保山', '德宏', '怒江', '迪庆', '大理', '楚雄', '红河', '文山', '西双版纳'],\n    '陕西省': ['西安', '延安', '铜川', '渭南', '咸阳', '宝鸡', '汉中', '榆林', '商洛', '安康'],\n    '甘肃省': ['兰州', '嘉峪关', '金昌', '白银', '天水', '酒泉', '张掖', '武威', '庆阳', '平凉', '定西', '陇南', '临夏', '甘南'],\n    '青海省': ['西宁', '海东', '西宁', '海北', '海南', '黄南', '果洛', '玉树', '海西'],\n    '内蒙古': ['呼和浩特', '包头', '乌海', '赤峰', '呼伦贝尔盟', '兴安盟', '哲里木盟', '锡林郭勒盟', '乌兰察布盟', '鄂尔多斯', '巴彦淖尔盟', '阿拉善盟'],\n    '广西': ['南宁', '桂林', '柳州', '梧州', '贵港', '玉林', '钦州', '北海', '防城港', '南宁', '百色', '河池', '柳州', '贺州'],\n    '西藏': ['拉萨', '那曲', '昌都', '林芝', '山南', '日喀则', '阿里'],\n    '宁夏': ['银川', '石嘴山', '吴忠', '固原'],\n    '新疆': ['乌鲁木齐', '克拉玛依', '喀什', '阿克苏', '和田', '吐鲁番', '哈密', '博尔塔拉', '昌吉', '巴音郭楞', '伊犁', '塔城', '阿勒泰'],\n    '香港': ['香港'],\n    '澳门': ['澳门'],\n    '台湾': ['台北', '台南', '其他']\n  },\n  getProvinces: function getProvinces() {\n    return Object.keys(this.cityInfo);\n  },\n  getCities: function getCities(province) {\n    return this.cityInfo[province];\n  }\n};\n\nmodule.exports = _citySelect;\n\n/***/ }),\n\n/***/ 60:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<li> <span><i class=required>*</i>所在地区</span> <select name=\\\"\\\" id=\\\"\\\" class=province value=\\\"<%=data.receiverProvince || ''%>\\\"> <%if(data.receiverProvince){%> <option disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <%if(value === data.receiverProvince){%> <option selected=selected value=\\\"<%=value%>\\\"><%=value%></option> <%} else {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%> <%}%> </select> <select name=\\\"\\\" id=\\\"\\\" class=city value=\\\"<%=data.receiverCity || ''%>\\\"> <option selected=selected disabled=disabled>--请选择城市--</option> </select> </li> <li> <span><i class=required>*</i>收货人</span> <input type=text name=\\\"\\\" id=person-name value=\\\"<%=data.receiverName || ''%>\\\"> </li> <li> <span><i class=required>*</i>详细地址</span> <input type=text name=\\\"\\\" id=address-detail value=\\\"<%=data.receiverAddress || ''%>\\\"> </li> <li> <span><i class=required>*</i>手机号码</span> <input type=text name=\\\"\\\" id=tel value=\\\"<%=data.receiverPhone || ''%>\\\"> </li> <li> <span><i class=\\\"\\\"></i>邮编</span> <input type=text name=\\\"\\\" id=post-code value=\\\"<%=data.receiverZip || ''%>\\\"> </li> <li><a href=# class=submit-btn>保存收货人信息</a></li>\";\n\n/***/ }),\n\n/***/ 61:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<option selected=selected disabled=disabled>--请选择省份--</option> <%data.forEach(value =>{%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%>\";\n\n/***/ }),\n\n/***/ 62:\n/***/ (function(module, exports) {\n\nmodule.exports = \"<%if(data.selectedCity){%> <option disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <%if(value === data.selectedCity) {%> <option selected=selected value=\\\"<%=value%>\\\"><%=value%></option> <%} else {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%> <%}%>\";\n\n/***/ }),\n\n/***/ 9:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-07 16:59:13 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 16:56:38\r\n */\n\nvar _util = __webpack_require__(0);\nvar _user = __webpack_require__(3);\n\nvar _address = {\n  // 获取地址列表\n  getAddressList: function getAddressList(resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/shipping/list.do'),\n      data: {\n        pageSize: 10\n      },\n      success: resolve,\n      error: reject\n    });\n  },\n\n  // 新增收货地址\n  createAddress: function createAddress(para, resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/shipping/add.do'),\n      data: para,\n      success: resolve,\n      error: reject\n    });\n  },\n\n  // 更新收货地址\n  updateAddress: function updateAddress(para, resolve, reject) {\n    console.log(para);\n    _util.request({\n      url: _util.getUrl('/shipping/update.do'),\n      data: para,\n      success: resolve,\n      error: reject\n    });\n  },\n\n  // 删除收货地址\n  deleteAddress: function deleteAddress(para, resolve, reject) {\n    _util.request({\n      url: _util.getUrl('/shipping/del.do'),\n      data: para,\n      success: resolve,\n      error: reject\n    });\n  },\n  getSelectedAddress: function getSelectedAddress(para, resolve, reject) {\n    console.log(para);\n    _util.request({\n      url: _util.getUrl('/shipping/select.do'),\n      para: para,\n      success: resolve,\n      error: reject\n    });\n  }\n};\n\nmodule.exports = _address;\n\n/***/ })\n\n},[52]);\n\n\n// WEBPACK FOOTER //\n// js/order-confirm.js","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-03-31 22:00:47 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-10 12:55:18\r\n */\r\n\r\n// header js&css\r\nrequire('pages/components/header/index.js');\r\n\r\n// header-search js&css\r\nrequire('pages/components/header-search/index.js');\r\n\r\n// simple-footer js&css\r\nrequire('pages/components/simple-footer/index.js');\r\n\r\n// css\r\nrequire('./index.scss')\r\n\r\n// util工具类\r\nconst _util = require('tool/util/util.js');\r\nconst _order = require('tool/service/order.js');\r\nconst _address = require('tool/service/address.js');\r\n\r\nconst addressTpl = require('./address-list.ejs');\r\nconst productTpl = require('./product-list.ejs');\r\n\r\n// 1.新增地址 2.修改地址 modal\r\nconst modal = require('./modal.js');\r\n\r\nvar orderConfirm = {\r\n  data: {\r\n    shippingId: ''\r\n  },\r\n  init() {\r\n    this.load();\r\n    this.bind();\r\n  },\r\n  load() {\r\n    this.loadAddressList();\r\n    this.loadProductList()\r\n  },\r\n  bind() {\r\n    let _this = this;\r\n\r\n    // 新增收货地址\r\n    $(document).on('click', '.add-address', function (e) {\r\n      e.preventDefault();\r\n      modal.init({\r\n        type: 'add',\r\n        success: _this.loadAddressList\r\n      });\r\n    })\r\n    // 修改地址\r\n    $(document).on('click', '.edit', function (e) {\r\n      let $this = $(this);\r\n      \r\n      e.preventDefault();\r\n      modal.init({\r\n        type: 'edit',\r\n        $ele: $this.parents('li'),\r\n        success: _this.loadAddressList\r\n      });\r\n    })\r\n\r\n    //删除\r\n    $(document).on('click', '.del', function(){\r\n      let $ele = $(this).parents('li');\r\n      let id = $ele.data('id');\r\n      _address.deleteAddress({\r\n        shippingId: id\r\n      },function (res) {\r\n        _util.successTips('地址删除成功');\r\n        _this.loadAddressList();\r\n      },function (errMsg) {\r\n        _util.errorTips(errMsg)\r\n        console.log(errMsg)\r\n      })\r\n    })\r\n\r\n    // 提交订单\r\n    $(document).on('click', '.submit-order', function(){\r\n      if(_this.data.shippingId) {\r\n        _order.createOrder({\r\n          shippingId: _this.data.shippingId\r\n        },function (res) {\r\n          console.log(res)\r\n          location.href = `./pay.html?orderNo=${res.data.orderNo}`\r\n        },function (errMsg) {\r\n          _util.errorTips('提交订单失败')\r\n        })\r\n      } else {\r\n        _util.errorTips('还没有选择收货地址')\r\n      }\r\n    })\r\n\r\n\r\n    // 选中特定收件人\r\n    $(document).on('click', '.address-name', function(){\r\n      let $ele = $(this).parents('li');\r\n      _this.data.shippingId = $ele.data('id');\r\n\r\n      $ele.addClass('active').siblings().removeClass('active');\r\n\r\n    })\r\n  },\r\n\r\n  // 加载地址列表\r\n  loadAddressList() {\r\n    _address.getAddressList(function (res) {\r\n      console.log(res)\r\n      $('.address-list').html(_util.renderHtml(addressTpl, res.data))\r\n    }, function (errMsg) {\r\n      _util.errorTips(errMsg);\r\n    })\r\n  },\r\n  // 加载订单商品列表\r\n  loadProductList() {\r\n    _order.getProductList(function (res) {\r\n      // console.log(res)\r\n      $('.tpl-wrapper').html(_util.renderHtml(productTpl, res.data))\r\n    }, function (errMsg) {\r\n      _util.errorTips(errMsg);\r\n    })\r\n  }\r\n}\r\n\r\n$(function () {\r\n  orderConfirm.init();\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirm/index.js","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-07 16:59:13 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 17:29:32\r\n */\r\n\r\n\r\nconst _util = require('tool/util/util.js');\r\nconst _user = require('tool/service/user.js');\r\n\r\n\r\nlet _order = {\r\n  // 获取提交的订单商品\r\n  getProductList(resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/order/get_order_cart_product.do'),\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  // 提交订单\r\n  createOrder: function (para, resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/order/create.do'),\r\n      data: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  // 获取订单列表\r\n  getOrderList: function (para, resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/order/list.do'),\r\n      data: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n}\r\n\r\nmodule.exports = _order;\n\n\n// WEBPACK FOOTER //\n// ./src/tool/service/order.js","module.exports = \"<%if(data.list && data.list.length){%> <%data.list.forEach(value => {%> <li data-id=\\\"<%=value.id%>\\\"> <span class=address-name><%=value.receiverName%></span> <span class=name><%=value.receiverName%></span> <span class=province><%=value.receiverProvince%></span> <span class=city><%=value.receiverCity%></span> <span class=address-detail><%=value.receiverAddress%></span> <span class=tel><%=value.receiverPhone%></span> <div class=operation-wrapper> <span class=edit>编辑</span> <span class=del>删除</span> </div> </li> <%})%> <%}%> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order-confirm/address-list.ejs\n// module id = 56\n// module chunks = 1","module.exports = \" <div class=\\\"sec sec2\\\"> <h4 class=title>送货清单</h4> <table class=table> <tr class=header> <td class=\\\"\\\">商品描述</td> <td class=\\\"\\\">价格</td> <td class=\\\"\\\">数量</td> <td class=\\\"\\\">小计</td> </tr> <%data.orderItemVoList.forEach(value => {%> <tr class=product-item> <td> <img src=\\\"<%=data.imageHost + value.productImage%>\\\" alt=\\\"\\\"> <span class=name><%=value.productName%></span> </td> <td class=cell>$ <%=value.currentUnitPrice%></td> <td class=cell><%=value.quantity%></td> <td class=cell>$ <%=value.totalPrice%></td> </tr> <%})%> </table> </div> <div class=\\\"footer sec3\\\"> <span class=total-price-wrapper> 订单总价： <span class=total-price>$ <%=data.productTotalPrice%></span> </span> <span class=submit-order>提交订单</span> </div> \";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order-confirm/product-list.ejs\n// module id = 57\n// module chunks = 1","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-09 10:40:20 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 17:14:37\r\n */\r\n\r\n// 省市联动\r\nconst _citySelect = require('tool/util/city-select.js');\r\n\r\nconst _util = require('tool/util/util.js');\r\n\r\n// 地址接口\r\nconst _address = require('tool/service/address.js');\r\n\r\n// 除省份城市之外的tpl\r\nconst modalTpl = require('./modal.ejs');\r\n// 省份城市tpl\r\nconst provincesTpl = require('./provinces.ejs');\r\nconst citiesTpl = require('./cities.ejs');\r\n\r\n\r\nlet modal = {\r\n  init(para){\r\n    /**\r\n     * para {\r\n     *  type: 'edit' or 'add',\r\n     *  $ele:  (edit存在的情况下) \r\n     * } \r\n     */ \r\n    this.para = para;\r\n    \r\n    // modal\r\n    this.$modal = $('.add-address-modal');\r\n    this.$modalCon = this.$modal.find('.modal');\r\n    this.$infoList = this.$modal.find('.info-list');\r\n\r\n    // shippingId (type=== ‘edit’)\r\n    para.type === 'edit' ? this.para.id = para.$ele.data('id') : '';\r\n\r\n    // 加载原始数据\r\n    this.load();\r\n    \r\n    // 显示\r\n    this.$modal.show();\r\n  },\r\n  load(){\r\n    let _this = this;\r\n\r\n    let data = {\r\n      provinces: _citySelect.getProvinces()\r\n    }\r\n\r\n    // 添加地址\r\n    if(this.para.type === 'add') {\r\n      this.$infoList.html(_util.renderHtml(modalTpl, data));\r\n      this.getEle();\r\n      this.bind();\r\n    } \r\n    // 编辑地址\r\n    else if(this.para.type === 'edit') {\r\n      _address.getAddressList(function (res) {\r\n        if(res.data.list && res.data.list.length) {\r\n          // 获取shippingId对应的地址\r\n          let address = res.data.list.filter(value => value.id === _this.para.id)[0];\r\n          \r\n          // render信息\r\n          _this.$infoList.html(_util.renderHtml(modalTpl, $.extend(address, data)));\r\n          // render城市\r\n          _this.loadCities(address.receiverProvince, address.receiverCity);\r\n          _this.getEle();\r\n          _this.bind();\r\n        }\r\n        \r\n      })\r\n      // 这个接口好像挂了\r\n      // _address.getSelectedAddress({\r\n      //   shippingId: this.para.id\r\n      // },function (res) {\r\n      //   console.log(res)\r\n      //   this.$infoList.html(_util.renderHtml(modalTpl, res.data));\r\n      // },function (errMsg) {\r\n      //   console.log(errMsg)\r\n      // })\r\n    }\r\n  },\r\n  loadCities(province, selectedCity){\r\n    let cities = _citySelect.getCities(province);\r\n    $('.modal .city').html(_util.renderHtml(citiesTpl, {\r\n      cities: cities,\r\n      selectedCity: selectedCity\r\n    }));\r\n  },\r\n  bind(){\r\n    let _this = this;\r\n\r\n    // 省市联动\r\n    this.$provinceSelect.on('change',function () {\r\n      let province = $(this).val();\r\n      _this.loadCities(province);\r\n    })\r\n\r\n    let isAdding = false;\r\n    this.$submitBtn.on('click',function (e) {\r\n      e.preventDefault();\r\n      let result = _this.getSubmitPara();\r\n      // 新增地址\r\n      if(_this.para.type === 'add' && result.status && !isAdding) {\r\n        isAdding = true;        \r\n        _address.createAddress(result.para, function (res) {\r\n          _util.successTips('地址添加成功');\r\n          _this.$modal.hide();\r\n          typeof _this.para.success && _this.para.success();\r\n          _this.$modal.hide();\r\n          isAdding = false;\r\n          console.log(res)\r\n        },function (errMsg) {\r\n          console.log(errMsg);\r\n          _util.errorTips(errMsg);\r\n        })\r\n      } \r\n      // 编辑地址\r\n      else if(_this.para.type === 'edit' && result.status) {\r\n        _address.updateAddress(result.para, function (res) {\r\n          _util.successTips('地址修改成功');\r\n          _this.$modal.hide();\r\n          typeof _this.para.success && _this.para.success();\r\n          _this.$modal.hide();\r\n          console.log(res)\r\n        },function (errMsg) {\r\n          console.log(errMsg);\r\n          _util.errorTips(errMsg);\r\n        })\r\n      }\r\n    })\r\n\r\n    // 关闭modal\r\n    this.$modalCon.on('click', function (e) {\r\n      e.stopPropagation();\r\n    })\r\n    this.$closeBtn.on('click',function (e) {\r\n      e.stopPropagation();\r\n      _this.$modal.hide();\r\n    })\r\n    this.$modal.on('click',function(){\r\n      _this.$modal.hide();\r\n    })\r\n  },\r\n  getSubmitPara(){\r\n    let result = {\r\n      status: false,\r\n      msg: '',\r\n      para: null\r\n    };\r\n    let para = {\r\n      receiverName: this.$personNameIpt.val().trim(),\r\n      receiverPhone: this.$telIpt.val().trim(),\r\n      receiverProvince: this.$provinceSelect.val(),\r\n      receiverCity: this.$citySelect.val(),\r\n      receiverAddress: this.$addressDetailIpt.val().trim(),\r\n      receiverZip: this.$postCodeIpt.val().trim()\r\n    }\r\n\r\n    if(this.para.type !== 'add') {\r\n      para.id = this.para.id;\r\n    }\r\n\r\n    if(!para.receiverName) {\r\n      result.msg = '请输入收件人姓名';\r\n    } else if(!para.receiverProvince) {\r\n      result.msg = '请选择省份';\r\n    } else if(!para.receiverCity) {\r\n      result.msg = '请选择城市'\r\n    } else if(!para.receiverAddress) {\r\n      result.msg = '请输入详细地址'\r\n    } else if(!_util.isPhoneNumber(para.receiverPhone)) {\r\n      result.msg = '请输入正确的手机号'\r\n    } else {\r\n      result.status = true;\r\n      result.para = para\r\n    }\r\n    return result;\r\n\r\n    \r\n  },\r\n  getEle(){\r\n    this.$provinceSelect = this.$modal.find('.province');\r\n    this.$citySelect = this.$modal.find('.city');\r\n    this.$personNameIpt = this.$modal.find('#person-name');\r\n    this.$addressDetailIpt = this.$modal.find('#address-detail');\r\n    this.$telIpt = this.$modal.find('#tel');\r\n    this.$postCodeIpt = this.$modal.find('#post-code');\r\n\r\n    this.$submitBtn = this.$modal.find('.submit-btn');\r\n    this.$closeBtn = this.$modal.find('.fa-times');\r\n  }\r\n}\r\n\r\nmodule.exports = modal;\n\n\n// WEBPACK FOOTER //\n// ./src/pages/order-confirm/modal.js","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-09 11:00:59 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 12:09:22\r\n */\r\n\r\nlet _citySelect = {\r\n  cityInfo : {\r\n    '北京':['北京'],\r\n    '上海':['上海'],\r\n    '天津':['天津'],\r\n    '重庆':['重庆'],\r\n    '河北省':['石家庄','张家口','承德','秦皇岛','唐山','廊坊','保定','沧州','衡水','邢台','邯郸'],\r\n    '山西省':['太原','大同','朔州','阳泉','长治','晋城','忻州','吕梁','晋中','临汾','运城'],\r\n    '辽宁省':['沈阳','朝阳','阜新','铁岭','抚顺','本溪','辽阳','鞍山','丹东','大连','营口','盘锦','锦州','葫芦岛'],\r\n    '吉林省':['长春','白城','松原','吉林','四平','辽源','通化','白山','延边'],\r\n    '黑龙江省':['哈尔滨','齐齐哈尔','黑河','大庆','伊春','鹤岗','佳木斯','双鸭山','七台河','鸡西','牡丹江','绥化','大兴安'],\r\n    '江苏省':['南京','徐州','连云港','宿迁','淮阴','盐城','扬州','泰州','南通','镇江','常州','无锡','苏州'],\r\n    '浙江省':['杭州','湖州','嘉兴','舟山','宁波','绍兴','金华','台州','温州','丽水'],\r\n    '安徽省':['合肥','宿州','淮北','阜阳','蚌埠','淮南','滁州','马鞍山','芜湖','铜陵','安庆','黄山','六安','巢湖','池州','宣城'],\r\n    '福建省':['福州','南平','三明','莆田','泉州','厦门','漳州','龙岩','宁德'],\r\n    '江西省':['南昌','九江','景德镇','鹰潭','新余','萍乡','赣州','上饶','抚州','宜春','吉安'],\r\n    '山东省':['济南','聊城','德州','东营','淄博','潍坊','烟台','威海','青岛','日照','临沂','枣庄','济宁','泰安','莱芜','滨州','菏泽'],\r\n    '河南省':['郑州','三门峡','洛阳','焦作','新乡','鹤壁','安阳','濮阳','开封','商丘','许昌','漯河','平顶山','南阳','信阳','周口','驻马店'],\r\n    '湖北省':['武汉','十堰','襄攀','荆门','孝感','黄冈','鄂州','黄石','咸宁','荆州','宜昌','恩施','襄樊'],\r\n    '湖南省':['长沙','张家界','常德','益阳','岳阳','株洲','湘潭','衡阳','郴州','永州','邵阳','怀化','娄底','湘西'],\r\n    '广东省':['广州','清远','韶关','河源','梅州','潮州','汕头','揭阳','汕尾','惠州','东莞','深圳','珠海','江门','佛山','肇庆','云浮','阳江','茂名','湛江'],\r\n    '海南省':['海口','三亚'],\r\n    '四川省':['成都','广元','绵阳','德阳','南充','广安','遂宁','内江','乐山','自贡','泸州','宜宾','攀枝花','巴中','达川','资阳','眉山','雅安','阿坝','甘孜','凉山'],\r\n    '贵州省':['贵阳','六盘水','遵义','毕节','铜仁','安顺','黔东南','黔南','黔西南'],\r\n    '云南省':['昆明','曲靖','玉溪','丽江','昭通','思茅','临沧','保山','德宏','怒江','迪庆','大理','楚雄','红河','文山','西双版纳'],\r\n    '陕西省':['西安','延安','铜川','渭南','咸阳','宝鸡','汉中','榆林','商洛','安康'],\r\n    '甘肃省':['兰州','嘉峪关','金昌','白银','天水','酒泉','张掖','武威','庆阳','平凉','定西','陇南','临夏','甘南'],\r\n    '青海省':['西宁','海东','西宁','海北','海南','黄南','果洛','玉树','海西'],\r\n    '内蒙古':['呼和浩特','包头','乌海','赤峰','呼伦贝尔盟','兴安盟','哲里木盟','锡林郭勒盟','乌兰察布盟','鄂尔多斯','巴彦淖尔盟','阿拉善盟'],\r\n    '广西':['南宁','桂林','柳州','梧州','贵港','玉林','钦州','北海','防城港','南宁','百色','河池','柳州','贺州'],\r\n    '西藏':['拉萨','那曲','昌都','林芝','山南','日喀则','阿里'],\r\n    '宁夏':['银川','石嘴山','吴忠','固原'],\r\n    '新疆':['乌鲁木齐','克拉玛依','喀什','阿克苏','和田','吐鲁番','哈密','博尔塔拉','昌吉','巴音郭楞','伊犁','塔城','阿勒泰'],\r\n    '香港':['香港'],\r\n    '澳门':['澳门'],\r\n    '台湾':['台北','台南','其他']\r\n  },\r\n  getProvinces(){\r\n    return Object.keys(this.cityInfo);\r\n  },\r\n  getCities(province){\r\n    return this.cityInfo[province];\r\n  }\r\n}\r\n\r\nmodule.exports = _citySelect\n\n\n// WEBPACK FOOTER //\n// ./src/tool/util/city-select.js","module.exports = \"<li> <span><i class=required>*</i>所在地区</span> <select name=\\\"\\\" id=\\\"\\\" class=province value=\\\"<%=data.receiverProvince || ''%>\\\"> <%if(data.receiverProvince){%> <option disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <%if(value === data.receiverProvince){%> <option selected=selected value=\\\"<%=value%>\\\"><%=value%></option> <%} else {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择省份--</option> <%data.provinces.forEach(value =>{%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%> <%}%> </select> <select name=\\\"\\\" id=\\\"\\\" class=city value=\\\"<%=data.receiverCity || ''%>\\\"> <option selected=selected disabled=disabled>--请选择城市--</option> </select> </li> <li> <span><i class=required>*</i>收货人</span> <input type=text name=\\\"\\\" id=person-name value=\\\"<%=data.receiverName || ''%>\\\"> </li> <li> <span><i class=required>*</i>详细地址</span> <input type=text name=\\\"\\\" id=address-detail value=\\\"<%=data.receiverAddress || ''%>\\\"> </li> <li> <span><i class=required>*</i>手机号码</span> <input type=text name=\\\"\\\" id=tel value=\\\"<%=data.receiverPhone || ''%>\\\"> </li> <li> <span><i class=\\\"\\\"></i>邮编</span> <input type=text name=\\\"\\\" id=post-code value=\\\"<%=data.receiverZip || ''%>\\\"> </li> <li><a href=# class=submit-btn>保存收货人信息</a></li>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order-confirm/modal.ejs\n// module id = 60\n// module chunks = 1","module.exports = \"<option selected=selected disabled=disabled>--请选择省份--</option> <%data.forEach(value =>{%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order-confirm/provinces.ejs\n// module id = 61\n// module chunks = 1","module.exports = \"<%if(data.selectedCity){%> <option disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <%if(value === data.selectedCity) {%> <option selected=selected value=\\\"<%=value%>\\\"><%=value%></option> <%} else {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%}%> <%})%> <%} else {%> <option selected=selected disabled=disabled>--请选择城市--</option> <%data.cities.forEach(value => {%> <option value=\\\"<%=value%>\\\"><%=value%></option> <%})%> <%}%>\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order-confirm/cities.ejs\n// module id = 62\n// module chunks = 1","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-07 16:59:13 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-09 16:56:38\r\n */\r\n\r\n\r\nconst _util = require('tool/util/util.js');\r\nconst _user = require('tool/service/user.js');\r\n\r\nlet _address = {\r\n  // 获取地址列表\r\n  getAddressList(resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/shipping/list.do'),\r\n      data:{\r\n        pageSize: 10\r\n      },\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  // 新增收货地址\r\n  createAddress(para, resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/shipping/add.do'),\r\n      data: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  // 更新收货地址\r\n  updateAddress(para, resolve, reject) {\r\n    console.log(para)\r\n    _util.request({\r\n      url: _util.getUrl('/shipping/update.do'),\r\n      data: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  // 删除收货地址\r\n  deleteAddress(para, resolve, reject) {\r\n    _util.request({\r\n      url: _util.getUrl('/shipping/del.do'),\r\n      data: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  },\r\n  getSelectedAddress(para, resolve, reject){\r\n    console.log(para)\r\n    _util.request({\r\n      url: _util.getUrl('/shipping/select.do'),\r\n      para: para,\r\n      success: resolve,\r\n      error: reject\r\n    })\r\n  }\r\n}\r\n\r\nmodule.exports = _address;\n\n\n// WEBPACK FOOTER //\n// ./src/tool/service/address.js"],"sourceRoot":""}