webpackJsonp([4],{41:function(a,t,s){a.exports=s(42)},42:function(a,t,s){"use strict";(function(a){s(4),s(6),s(2),s(43);var t=s(0),i=s(7),r=s(44),d=s(8),e={data:{para:{productId:0,orderNum:1}},init:function(){this.load()},load:function(){var s=this;this.data.para.productId=t.getUrlQuery("productId"),this.$keyword=a(".crumb-wrapper .keyword"),this.$productInfo=a(".product-intro"),i.getDetail({productId:this.data.para.productId},function(i){console.log(i),a(".product-detail").html(t.renderHtml(r,i.data)),s.bind(i)},function(t){a(".product-detail").html(t)})},bind:function(s){this.data.stock=s.stock;var i=this,r=a(".img-list"),e=a(".main-img img");r.on("mouseenter","li",function(){a(this).addClass("active").siblings().removeClass("active"),e.prop("src",a(this).find("img").prop("src"))});var l=a(".order-wrapper .order"),o=l.find(".order-num"),c=l.find(".plus"),n=l.find(".minus");this.data.para.orderNum=Number(o.text().trim()),1===this.data.para.orderNum&&n.addClass("disable"),n.on("click",function(){i.data.para.orderNum-=1,i.data.para.orderNum<1||(1===i.data.para.orderNum&&n.addClass("disable"),o.text(i.data.para.orderNum))}),c.on("click",function(){return i.data.para.orderNum+=1,i.data.para.orderNum>1&&n.removeClass("disable"),i.data.para.orderNum>20?void console.log("此商品每账号最多购买20件"):i.data.para.orderNum>i.data.stock?void console.log("超过库存量"):void o.text(i.data.para.orderNum)}),console.log(s),a(".add-to-cart").on("click",function(){d.addToCart({productId:i.data.para.productId,count:i.data.para.orderNum},function(a){alert(a),t.saveToLocal({imgPath:a.data.imageHost+a.data.mainImage,name:a.data.name,count:i.data.para.orderNum},"order-info"),console.log(a),location.href="./tip.html?type=add-to-cart"},function(a){alert(1),t.saveToLocal({imgPath:s.data.imageHost+s.data.mainImage,name:s.data.name,count:i.data.para.orderNum},"order-info"),location.href="./tip.html?type=add-to-cart"})})}};a(function(){e.init()})}).call(t,s(1))},43:function(a,t){},44:function(a,t){a.exports='<ul class="crumb-wrapper w"> <li class=item>商品详情 <i class="fa fa-angle-right"></i></li> <li class=item>"<span class=keyword title="<%= data.name %>"><%= data.name %></span>"</li> </ul> <div class="product-intro w clearfix"> <div class=preview-wrapper> <div class=main-img> <img src="<%=data.imageHost + data.mainImage%>" alt=""> </div> <ul class=img-list> <% data.subImages.split(\',\').forEach((value,index) => {%> <%if(index === 0) {%> <li class=active> <img data-src="<%=data.imageHost + value%>" src="<%=data.imageHost + value%>" alt=""> </li> <%} else {%> <li> <img data-src="<%=data.imageHost + value%>" src="<%=data.imageHost + value%>" alt=""> </li> <%}%> <%})%> </ul> </div> <div class=info-wrapper> <p class=title><%=data.name%></p> <p class=sub-title><%=data.subtitle%></p> <ul class=summary> <li class=price> <span class=title>京东价</span> <span class=text><i class="fa fa-jpy"></i><span class=price-num><%=data.price%></span></span> </li> <li class=store> <span class=title>库存</span> <span class=text><span class=store-num><%=data.stock%></span>件</span> </li> <li class="order-wrapper clearfix"> <div class=order> <p class=order-num>1</p> <div class=plus-minus> <span class=plus>+</span> <span class=minus>-</span> </div> </div> <p class=add-to-cart>加入购物车</p> </li> </ul> </div> </div> <div class="detail-content w"> <ul class=title> <li>商品介绍</li> </ul> <%-data.detail%> </div>'}},[41]);
//# sourceMappingURL=product-detail.js.map