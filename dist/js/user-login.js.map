{"version":3,"sources":["webpack:///js/user-login.js","webpack:///./src/pages/user-login/index.js"],"names":["webpackJsonp","28","module","exports","__webpack_require__","29","$","_util","_user","userLogin","data","redirect","getUrlQuery","init","this","load","bind","_this2","_this","$loginHeader","on","e","children","removeClass","target","addClass","$emptyInput","$inputWrapper","find","val","trim","siblings","show","hide","$loginBtn","formData","username","password","validate","status","login","res","location","href","console","log","errMsg","errorMsg","result","msg","isRequired","$msgWrapper","text","call","30"],"mappings":"AAAAA,cAAc,IAERC,GACA,SAAUC,EAAQC,EAASC,GAEjCF,EAAOC,QAAUC,EAAoB,KAK/BC,GACA,SAAUH,EAAQC,EAASC,GAEjC,cAC4B,SAASE,GCPrCF,EAAQ,IAERA,EAAQ,EAER,IAAMG,GAAQH,EAAQ,GAChBI,EAAQJ,EAAQ,GAElBK,GACFC,MACEC,SAAUJ,EAAMK,YAAY,aAE9BC,KAJc,WAKZC,KAAKC,OACLD,KAAKE,QAEPD,KARc,aAWdC,KAXc,WAWP,GAAAC,GAAAH,KACDI,EAAQJ,IAEZA,MAAKK,aAAeb,EAAE,0BACtBQ,KAAKK,aAAaC,GAAG,QAAS,QAAS,SAAAC,GACrCJ,EAAKE,aAAaG,WAAWC,YAAY,UACzCjB,EAAEe,EAAEG,QAAQC,SAAS,YAKvBX,KAAKY,YAAcpB,EAAE,UACrBQ,KAAKa,cAAgBrB,EAAE,kBACvBQ,KAAKa,cAAcC,KAAK,SAASR,GAAG,QAAS,WACxCd,EAAEQ,MAAMe,MAAMC,QAAQxB,EAAEQ,MAAMiB,SAAS,UAAUC,SAEtDlB,KAAKY,YAAYN,GAAG,QAAS,WAC3Bd,EAAEQ,MAAMmB,OAAOF,SAAS,SAASF,IAAI,MAGvCf,KAAKoB,UAAY5B,EAAE,cACnBQ,KAAKoB,UAAUd,GAAG,QAAS,WACzB,GAAIe,IACFC,SAAU9B,EAAE,SAASuB,MAAMC,OAC3BO,SAAU/B,EAAE,aAAauB,MAAMC,OAGpBZ,GAAMoB,SAASH,GAClBI,QACR/B,EAAMgC,MAAML,EAAU,SAASM,GAC7BC,SAASC,KAAOzB,EAAMR,KAAKC,SAC3BiC,QAAQC,IAAIJ,IACX,SAASK,GACV5B,EAAM6B,SAASD,GACfF,QAAQC,IAAIC,QASpBR,SAtDc,SAsDLH,GACP,GAAIa,IACFT,QAAQ,EACRU,IAAK,GAGP,OAAI1C,GAAM2C,WAAWf,EAASC,WAAc7B,EAAM2C,WAAWf,EAASE,UAG3D9B,EAAM2C,WAAWf,EAASC,UAG1B7B,EAAM2C,WAAWf,EAASE,UAG3BF,EAASE,SAAW,GAC5BW,EAAOC,IAAM,QACND,IAGTA,EAAOT,QAAS,EACTS,IARLA,EAAOC,IAAM,QACND,IAJPA,EAAOC,IAAM,SACND,IAJPA,EAAOC,IAAM,YACND,IAeXD,SA7Ec,SA6ELE,GACPnC,KAAKqC,YAAc7C,EAAE,gBACrBQ,KAAKqC,YAAY5B,YAAY,QAAQK,KAAK,cAAcwB,KAAKH,IAIjE3C,GAAE,WACAG,EAAUI,WDiBiBwC,KAAKlD,EAASC,EAAoB,KAIzDkD,GACA,SAAUpD,EAAQC,OAMrB","file":"js/user-login.js","sourcesContent":["webpackJsonp([9],{\n\n/***/ 28:\n/***/ (function(module, exports, __webpack_require__) {\n\nmodule.exports = __webpack_require__(29);\n\n\n/***/ }),\n\n/***/ 29:\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function($) {\n\n/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-01 18:24:44 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-08 12:10:11\r\n */\n\n__webpack_require__(30);\n\n__webpack_require__(2);\n\nvar _util = __webpack_require__(0);\nvar _user = __webpack_require__(3);\n\nvar userLogin = {\n  data: {\n    redirect: _util.getUrlQuery('redirect')\n  },\n  init: function init() {\n    this.load();\n    this.bind();\n  },\n  load: function load() {},\n  bind: function bind() {\n    var _this2 = this;\n\n    var _this = this;\n    // 扫码登录/账户登录切换\n    this.$loginHeader = $('.login-wrapper .header');\n    this.$loginHeader.on('click', '.item', function (e) {\n      _this2.$loginHeader.children().removeClass('active');\n      $(e.target).addClass('active');\n    });\n\n    // input如有值，显示清空按钮\n    // 点击清空按钮，清除input框\n    this.$emptyInput = $('.empty');\n    this.$inputWrapper = $('.input-wrapper');\n    this.$inputWrapper.find('input').on('input', function () {\n      if ($(this).val().trim()) $(this).siblings('.empty').show();\n    });\n    this.$emptyInput.on('click', function () {\n      $(this).hide().siblings('input').val('');\n    });\n\n    this.$loginBtn = $('.login-btn');\n    this.$loginBtn.on('click', function () {\n      var formData = {\n        username: $('#user').val().trim(),\n        password: $('#password').val().trim()\n      };\n\n      var result = _this.validate(formData);\n      if (result.status) {\n        _user.login(formData, function (res) {\n          location.href = _this.data.redirect;\n          console.log(res);\n        }, function (errMsg) {\n          _this.errorMsg(errMsg);\n          console.log(errMsg);\n        });\n      } else {}\n    });\n  },\n\n  // 判断账户，密码是否符合预期\n\n  validate: function validate(formData) {\n    var result = {\n      status: false,\n      msg: ''\n    };\n\n    if (!_util.isRequired(formData.username) && !_util.isRequired(formData.password)) {\n      result.msg = '请输入账户名和密码';\n      return result;\n    } else if (!_util.isRequired(formData.username)) {\n      result.msg = '请输入账户名';\n      return result;\n    } else if (!_util.isRequired(formData.password)) {\n      result.msg = '请输入密码';\n      return result;\n    } else if (formData.password < 8) {\n      result.msg = '密码不正确';\n      return result;\n    }\n\n    result.status = true;\n    return result;\n  },\n  errorMsg: function errorMsg(msg) {\n    this.$msgWrapper = $('.msg-wrapper');\n    this.$msgWrapper.removeClass('hide').find('.error-msg').text(msg);\n  }\n};\n\n$(function () {\n  userLogin.init();\n});\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(1)))\n\n/***/ }),\n\n/***/ 30:\n/***/ (function(module, exports) {\n\n// removed by extract-text-webpack-plugin\n\n/***/ })\n\n},[28]);\n\n\n// WEBPACK FOOTER //\n// js/user-login.js","/*\r\n * @Author: guidetheorient \r\n * @Date: 2018-04-01 18:24:44 \r\n * @Last Modified by: guidetheorient\r\n * @Last Modified time: 2018-04-08 12:10:11\r\n */\r\n\r\nrequire('./index.scss');\r\n\r\nrequire('../components/simple-footer/index.js');\r\n\r\nconst _util = require('tool/util/util.js');\r\nconst _user = require('tool/service/user.js');\r\n\r\nlet userLogin = {\r\n  data: {\r\n    redirect: _util.getUrlQuery('redirect')\r\n  },\r\n  init() {\r\n    this.load();\r\n    this.bind();\r\n  },\r\n  load() {\r\n\r\n  },\r\n  bind() {\r\n    let _this = this;\r\n    // 扫码登录/账户登录切换\r\n    this.$loginHeader = $('.login-wrapper .header');\r\n    this.$loginHeader.on('click', '.item', e => {\r\n      this.$loginHeader.children().removeClass('active');\r\n      $(e.target).addClass('active');\r\n    })\r\n\r\n    // input如有值，显示清空按钮\r\n    // 点击清空按钮，清除input框\r\n    this.$emptyInput = $('.empty');\r\n    this.$inputWrapper = $('.input-wrapper');\r\n    this.$inputWrapper.find('input').on('input', function(){\r\n      if($(this).val().trim()) $(this).siblings('.empty').show();\r\n    })\r\n    this.$emptyInput.on('click', function(){\r\n      $(this).hide().siblings('input').val('');\r\n    })\r\n\r\n    this.$loginBtn = $('.login-btn');\r\n    this.$loginBtn.on('click', function(){\r\n      let formData = {\r\n        username: $('#user').val().trim(),\r\n        password: $('#password').val().trim()\r\n      }\r\n\r\n      let result = _this.validate(formData);\r\n      if(result.status) {\r\n        _user.login(formData, function(res){\r\n          location.href = _this.data.redirect;\r\n          console.log(res)\r\n        }, function(errMsg){\r\n          _this.errorMsg(errMsg)\r\n          console.log(errMsg)\r\n        })\r\n      } else {\r\n\r\n      }\r\n    })\r\n  },\r\n  // 判断账户，密码是否符合预期\r\n  \r\n  validate(formData){\r\n    let result = {\r\n      status: false,\r\n      msg: ''\r\n    }\r\n\r\n    if(!_util.isRequired(formData.username) && !_util.isRequired(formData.password)){\r\n      result.msg = '请输入账户名和密码';\r\n      return result;\r\n    } else if(!_util.isRequired(formData.username)) {\r\n      result.msg = '请输入账户名';\r\n      return result;\r\n    } else if(!_util.isRequired(formData.password)) {\r\n      result.msg = '请输入密码';\r\n      return result;\r\n    } else if(formData.password < 8) {\r\n      result.msg = '密码不正确';\r\n      return result;\r\n    }\r\n\r\n    result.status = true;\r\n    return result;\r\n  },\r\n  errorMsg(msg){\r\n    this.$msgWrapper = $('.msg-wrapper');\r\n    this.$msgWrapper.removeClass('hide').find('.error-msg').text(msg)\r\n  }\r\n}\r\n\r\n$(function () {\r\n  userLogin.init();\r\n})\n\n\n// WEBPACK FOOTER //\n// ./src/pages/user-login/index.js"],"sourceRoot":""}